@{
    ViewBag.Title = "11 Hüter";
}

<div>
        <a href="~/Content/einteilung11.pdf">Druckansicht</a>
    @(Html.Kendo().Map()
      .Name("map")
              .Center(47.76, 16.8)
      .Zoom(12)
      .Layers(layers =>
               {

                   layers.Add()
                .Type(MapLayerType.Tile)
                .UrlTemplate("http://#= subdomain #.tile.openstreetmap.org/#= zoom #/#= x #/#= y #.png")
                .Subdomains("a", "b", "c")
                .Attribution("&copy; <a href='http://osm.org/copyright'>OpenStreetMap contributors</a>");
                   layers.Add()
                   .Style(style => style.Fill(fill => fill.Opacity(1)))
                   .Style(style => style.Fill(fill => fill.Color("red")))
                   .Style(style => style.Stroke(stroke => stroke.Width(0)))
                   .Type(MapLayerType.Shape)
                   .DataSource(dataSource => dataSource
                       .GeoJson()
                       .Read(read => read.Url(Url.Content("~/Content/rieden.json")))
                   );
                   layers.Add()
                      .Style(style => style.Fill(fill => fill.Opacity(0.0)))
                      .Style(style => style.Stroke(stroke => stroke.Width(3)))
                      .Style(style => style.Stroke(stroke => stroke.Color("black")))
                      .Type(MapLayerType.Shape)
                      .TitleField("name")
                      .DataSource(dataSource => dataSource
                          .GeoJson()
                          .Read(read => read.Url(Url.Content("~/Content/map11.json")))
                      );
               })
            .Events(events => events
           .ShapeCreated("onShapeCreated")
        )
    )

    <script src="@Url.Content("~/Content/dataviz/map/js/chroma.min.js")"></script>

    <script>
        function onShapeCreated(e) {
            var shape = e.shape;
            // Calculate shape bounding box
            var bbox = e.shape.bbox();
            var center = bbox.center();


            // Create the label
            var labelText = e.shape.dataItem.properties.einteilung;

            if (labelText) {
                var label = new kendo.drawing.Text(labelText,
                    { font: "2em 'Open Sans', sans-serif" });
                var labelCenter = label.bbox().center();

                // Position the label
                label.position([
                  center.x - labelCenter.x,
                  center.y - labelCenter.y
                ]);

                // Render the label on the layer surface
                e.layer.surface.draw(label);
            }
        }
    </script>
</div>